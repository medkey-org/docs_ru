# Установка через Docker

В МИС Медкей реализовано развёртывание в виде Docker-контейнера. Данный способ позволяет быстро развернуть и получить свежайший выпуск системы практически под любой из известных популярных платформ.

Способ подходит как для просмотра функциональных возможностей системы, так и для продакшн-развёртывания.

Преимущества развёртывания МИС Медкей с использованием Docker:

* Низкий расход ресурсов;
* Гибкие возможности по масштабированию, резервированию приложения;
* Возможность интеграции других Docker-контейнеров для использования в приложении;
* Удобная среда для разработки и отладки.

Перед использованием в продакшн-инсталляциях настоятельно рекомендуется ознакомление с администрированием Docker-контейнеров и работой команд docker и docker-compose.

## Установка МИС в Docker на Linux/MacOS

### Установка из дистрибутива

#### **Предварительные условия**

* Установлена ОС Linux/Unix \(Debian, CentOS, MacOS и т.д.\)
* Установлен Docker версии не ниже 18.09 \([инструкция по установке Docker](https://docs.docker.com/install/) на различные платформы\)
* Установлен Docker Compose версии не ниже 1.24 \([инструкция по установке Docker Compose](https://docs.docker.com/compose/install/) на различные платформы\)
* В операционной системе должна присутствовать программа tar

#### **Шаги по установке**

#### **Проверка установки**

#### Установка из репозитория

#### **Предварительные условия**

* Установлена ОС Linux/Unix \(Debian, CentOS, MacOS и т.д.\)
* Установлен Docker версии не ниже 18.09 \([инструкция по установке Docker](https://docs.docker.com/install/) на различные платформы\)
* Установлен Docker Compose версии не ниже 1.24 \([инструкция по установке Docker Compose](https://docs.docker.com/compose/install/) на различные платформы\)
* Установлен git \([инструкция по установке git-scm](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git) на различные платформы\)

#### **Шаги по установке**

1. Склонировать основной репозиторий приложения: `git clone git@github.com:medkey-org/medkey.git` \(SSH\) либо `git clone https://github.com/medkey-org/medkey.git` \(HTTPS\)
2. Перейти в склонированный каталог с репозиторием приложения: `cd ./medkey` \(путь может отличаться, зависит от пути развёртывания\)
3. Выполнить `chmod -R 777 .`
4. Выполнить команду:  `docker-compose up -d --build && docker-compose exec mk /bin/bash -c "cd /var/www/medkey && composer install && cp .env.prod .env && php bin config-database/pg-uuid-activate && php bin migrate --interactive=0 && php bin seed Package && cd frontend && npm install && npm run build-prod"`

#### **Проверка установки**

1. Открыть в браузере адрес 127.0.0.1:8090
2. Должен открыться веб-интерфейс приложения
3. Ввести стандартные логин и пароль `admin:admin`
4. Проверить порты, используемые контейнером, можно при помощи команды `docker-compose ps`.

![&#x412;&#x435;&#x431;-&#x438;&#x43D;&#x442;&#x435;&#x440;&#x444;&#x435;&#x439;&#x441; &#x41C;&#x418;&#x421; &#x41C;&#x435;&#x434;&#x43A;&#x435;&#x439;, &#x437;&#x430;&#x43F;&#x443;&#x449;&#x435;&#x43D;&#x43D;&#x43E;&#x433;&#x43E; &#x447;&#x435;&#x440;&#x435;&#x437; Docker](../../.gitbook/assets/image%20%2815%29.png)

## Установка МИС в Docker на Windows

### Установка из дистрибутива

#### **Предварительные условия**

* Установлена ОС Microsoft Windows \(Microsoft Windows 10, Microsoft Windows Server 2012+\)
* Установлен Docker версии не ниже 18.09 \([инструкция по установке Docker](https://docs.docker.com/docker-for-windows/install/) на Windows-платформы\)
* Установлен Docker Compose версии не ниже 1.24 \([инструкция по установке Docker Compose](https://docs.docker.com/compose/install/) на различные платформы\)
* Имеется инструмент для распаковки .tar.gz-архивов \(например, Winrar\)

#### **Шаги по установке**

#### **Проверка установки**

### Установка из репозитория

* Установлена ОС Microsoft Windows \(Microsoft Windows 10, Microsoft Windows Server 2012+\)
* Установлен Docker версии не ниже 18.09 \([инструкция по установке Docker](https://docs.docker.com/docker-for-windows/install/) на Windows-платформы\)
* Установлен Docker Compose версии не ниже 1.24 \([инструкция по установке Docker Compose](https://docs.docker.com/compose/install/) на различные платформы\)
* Установлен git \([инструкция по установке git-scm](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git) на различные платформы\)

#### **Предварительные условия**

#### **Шаги по установке**

#### **Проверка установки**

